#!/usr/bin/expect

if {$argc < 3} {
    puts "Usage:cmd <rhost> <remoteusername> <remotepassword>"
    exit 1
}

set timeout -1
set rhost [lindex $argv 0]
set rusername [lindex $argv 1]
set rpassword [lindex $argv 2]

spawn ssh $rusername@$rhost :

expect {
	"*assword" {send "$rpassword\r";}
	"yes/no" {send "yes\r";exp_continue}
	"*]#" {send "uname -a\r"}
	"\n" {}
	eof  {}
}
